# Детальный анализ текущей CRM

## Источники анализа

- Живой сайт: https://crm.it-datamaster.ru/
- Учетная запись: user991284
- 5 скриншотов из ТЗ

---

## 1. Общая структура системы

### Навигационное меню (боковая панель)

```
• Дашборд
• Посетители
• CRM (Генерация целевых клиентов)
• Пользователи
• Домены
• Аналитика
• Телефония
• Пользователь (создание)
• Новый Домен
```

### Верхняя панель управления

```
• Логотип "T X" (18:04 - текущее время)
• Продлить план
• API
• Баланс
• Настройки
• Пользователь
• Выход
```

---

## 2. Страница 1: "Мои сделки" (Основная страница CRM)

### URL
`/admin/crm/index-crm?v=2`

### Заголовок
**"Мои сделки"**

### Фильтры (в верхней панели)

```
1. Статус (дропдаун)
2. Поставщик (дропдаун)
3. Проекты (дропдаун)
4. Ответственные (дропдаун)
5. Получить базу (кнопка оранжевая)
```

### Правая панель

```
• Найти (иконка лупы)
• Фильтр (иконка воронки)
• 3× загрузка (иконка)
• Настройки (иконка шестеренки)
```

### Выбор отображения на странице

```
• Длина страницы: 50 (дропдаун)
• Иконка экспорта
• Иконка добавления в белый список
```

### Таблица номеров (колонки)

| № | Название колонки | Тип | Пример данных |
|------|------------------------|---------|---------------------|
| 1 | Чекбокс (выбор) | checkbox | - |
| 2 | Звездочка (избранное) | icon | ★ |
| 3 | Наименование компании | ссылка | "B1_nc-lingperfekta.ru" |
| 4 | Закреплен | text | "nc" |
| 5 | Сайт | link | lingperfekta.ru |
| 6 | Телефон | text | 79043794173 |
| 7 | Проект | text | - |
| 8 | Эл. почта | text | - |
| 9 | Напоминание | datetime | с сортировкой |
| 10 | Комментарий | text | "cбросил", "не акт:1" |
| 11 | Статус | dropdown | Новый 1 |
| 12 | Создано | datetime | "24 Июль 07:18" |
| 13 | Регион | text | - |

### Кнопки действий в строке

```
• Иконка редактирования (карандаш)
• Dropdown выбора CRM статуса (отображается при наведении)
```

### Пагинация

```
« 1 2 3 4 5 6 7 8 »
Показаны записи 1-50 из 367
```

### Информация о проекте

```
База ГЦК: 367 записей
```

---

## 3. Страница 2: "Конверсия удаленных проектов"

### Заголовок
**"Конверсия удаленных проектов"**

### Фильтры

```
1. Управление страницей (дропдаун)
2. Дата от: 2024-06-11 (date picker)
3. Дата до: 2024-06-24 (date picker)
4. Все (чекбокс)
5. Загрузить данные для анализа конверсии (ссылка)
```

### Таблица конверсии (колонки)

| Колонка | Описание | Тип данных |
|-----------|-------------|----------------|
| ID | Номер проекта | text |
| Проект | Название проекта | link |
| Источник трафа | Тип источника | text |
| Кол-во посещений | Число | number |
| Лиды | Количество | number |
| Конверсия | % | percentage |
| Повторные | Количество | number |
| Повторные после | Количество | number |
| Партнер | Количество | number |
| Прочие | Количество | number |

### Пример данных

```
nc-2 | B2_nc 2 www24.ru | Заказ | 0 | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%)
nc-1 | B2_nc 1 www24.ru | Заказ | 0 | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%)
```

### Итоговая строка

```
Итого: 193 | 0 | 34 | 0 | 0 | 0 | 0
```

### Пагинация

```
1-7 из 7
```

---

## 4. Страница 3: "Конверсия проектов" (активные)

### Заголовок
**"Конверсия проектов"**

### Фильтры

```
1. Управление страницей (дропдаун)
2. Удаленные проекты (ссылка)
3. Дата от: 2024-06-11 (date picker)
4. Дата до: 2024-06-24 (date picker)
5. Все (чекбокс)
6. Загрузить данные для анализа конверсии (ссылка)
```

### Таблица (аналогична предыдущей)

Те же колонки, но для **активных** проектов.

### Примеры данных

```
nc | B2_nc franchise.goldgema.com | Заказ | 0 | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%)
nc | B1_nc franchise.goldgema.com | Заказ | 0 | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%)
nc | B2_nc french-bargenieres.ru | Заказ | 83 | 0 (0%) | 26 (31.33%) | 0 (0%) | 0 (0%) | 0 (0%) | 1 (1.67%)
nc | B1_nc goodinvest.ru | Заказ | 11 | 0 (0%) | 5 (45.45%) | 0 (0%) | 0 (0%) | 0 (0%) | 0 (0%)
```

### Особенность

В таблице есть проекты с **ненулевой конверсией**:
- B2_nc french-bargenieres.ru: 83 посещения, 26 лидов (31.33%)
- B1_nc goodinvest.ru: 11 посещений, 5 лидов (45.45%)

---

## 5. Страница 4: "Мои проекты"

### Заголовок
**"Мои проекты"**

### Фильтры (в верхней панели)

```
1. 100% (прогресс-бар)
2. Состояние (дропдаун)
3. Поиск по проекту (текстовое поле)
4. Конверсия проектов (кнопка зеленая)
5. + Добавить проект (кнопка)
```

### Настройка (красное предупреждение)

```
"Пользователь не получает полный функционал
Нам нужно точно знать какие сайты указаны у вас в проектах. 
Вы выбрали оставить на 22.05.05 на 00.00 по МСК. 
Все настройки удаленного измерения доступности сайтов экспортированы правила и будут применены как только вы выберете настройки проекта."
```

### Таблица проектов (колонки)

| Колонка | Описание |
|-----------|-------------|
| Чекбокс | Выбор проекта |
| ID ⇕ | ID проекта (с сортировкой) |
| Статус строки | Галочка (активен/неактивен) |
| Тэг | Метка (напр. "nc") |
| Название | Название проекта + домен |
| Статус | Иконка статуса (галочка) |
| Тип | Тип проекта (напр. "Заказ") |
| Лимит | Лимит (число, напр. 5) |
| Номеров получено сегодня | Количество |
| Номеров получено всего | Количество |
| Дублей сегодня | Количество дублей |
| Номеров получено всего | Общее количество |
| Дата получения номера | Последняя дата |

### Пример данных

```
☑ 1368371 | ✓ | nc | B2_nc franchise.goldgema.com | ✓ | Заказ | 5 | 0 | 0 | 0 | 0 | Пн Вт Ср Пт Сб Пт
☑ 1368370 | ✓ | nc | B1_nc franchise.goldgema.com | ✓ | Заказ | 5 | 0 | 0 | 0 | 0 | Пн Вт Ср Пт Сб Пт
```

### Дни недели (в конце строки)

Видны дни недели, когда проект активен:
```
Пн Вт Ср Пт Сб Пт
```

---

## 6. Страница 5: "Добавить проект"

### Заголовок
**"Добавить проект"**

### Поля формы

| Поле | Тип | Описание |
|------|------|-------------|
| Активный | checkbox + инфо | Чекбокс с иконкой информации |
| Тэг | text input + инфо | Текстовое поле |
| Источник данных | checkbox group | **B1, B2, B3** (чекбоксы) |
| Название проекта | text input + инфо | Текстовое поле |
| Источники сбора | dropdown + инфо | "Сайты" |
| Включить / Исключить | toggle + text | Переключатель |
| Регион | dropdown + инфо | Выбор региона |
| Разделять по проектам | checkbox | Чекбокс |
| Список сайтов | tabs + textarea | Две вкладки: **Список**, **Файл** |

### Вкладка "Список"

```
Плейсхолдер:
"Вставьте домены. В каждой строчке по одному домену. 
Допустимый формат доменов: 
site.ru, www.site.ru, http://site.ru"
```

### Вкладка "Файл"

Загрузка файла с доменами.

### Источники данных (B1, B2, B3)

Это ключевой функционал: **выбор поставщиков данных**.

---

## 7. Ключевые находки для новой CRM

### 7.1 Структура данных

**Сущности:**

1. **Номера** (сделки/лиды)
   - ID
   - Наименование компании
   - Закреплен (менеджер)
   - Сайт (URL)
   - Телефон
   - Проект (ID проекта)
   - Эл. почта
   - Напоминание (datetime)
   - Комментарий (text)
   - Статус
   - Создано (datetime)
   - Регион (timezone)
   - Избранное (boolean)

2. **Проекты**
   - ID
   - Статус строки (активен/неактивен)
   - Тэг (label/tag)
   - Название + Домен
   - Источники данных (B1, B2, B3 - чекбоксы)
   - Тип (напр. "Заказ")
   - Лимит (number)
   - Дни недели (мультиселект: Пн-Вс)
   - Регион (dropdown)
   - Список сайтов (textarea / file)

3. **Конверсия** (агрегированные данные)
   - Проект ID
   - Источник трафа
   - Кол-во посещений
   - Лиды
   - Конверсия (%)
   - Повторные
   - Повторные после
   - Партнер
   - Прочие

### 7.2 Важные функции

1. **Выбор поставщиков (B1, B2, B3)**
   - Множественный выбор через чекбоксы
   - Основа для фильтрации данных

2. **Выбор гео (Регион)**
   - Dropdown с регионами России
   - Включает часовые пояса (UTC+3, UTC+5, UTC+7)

3. **Выбор дней недели**
   - Множественный выбор: Пн, Вт, Ср, Чт, Пт, Сб, Вс
   - Отображается в таблице проектов

4. **Конверсия проектов**
   - Отдельная страница с фильтрами по датам
   - Таблица с метриками: посещения, лиды, % конверсии
   - Разделение на «Активные» и «Удалённые» проекты

5. **Удалённые проекты**
   - Отдельная страница
   - С той же структурой конверсии, что и активные

6. **Выгрузка номеров**
   - Кнопка «Получить базу» в заголовке страницы
   - Иконка экспорта в таблице
   - Ссылка «Загрузить данные для анализа конверсии»

### 7.3 UI/UX паттерны

1. **Боковое меню** с иконками и текстом
2. **Верхняя панель** с действиями и информацией
3. **Фильтры сверху** таблицы
4. **Инлайн-редактирование** статусов в таблице
5. **Модальные окна** для создания/редактирования
6. **Иконки действий** в строках таблицы
7. **Пагинация** с номерами страниц и информацией о записях

### 7.4 Технические детали

- **Цветовая схема**: темное боковое меню, светлый основной контент
- **Кнопка первичного действия**: оранжевая
- **Кнопка вторичного действия**: зеленая
- **Предупреждение**: красный блок с текстом
- **Иконки**: Material Design / Font Awesome стиль

---

## 8. Рекомендации для новой CRM

### Что обязательно сохранить

1. **Выбор поставщиков (B1, B2, B3)** - ключевой функционал
2. **Выбор региона с часовыми поясами**
3. **Выбор дней недели** для проекта
4. **Страница конверсии** с фильтрами по датам
5. **Разделение на активные и удалённые проекты**
6. **Выгрузка данных** для анализа

### Что можно улучшить

1. **Массовые операции** с номерами (выбор множества строк)
2. **Расширенная фильтрация** (больше полей для поиска)
3. **Графики конверсии** (динамика по времени)
4. **Автоматическое обновление** статусов
5. **Настройка расписания SFTP** для автоматической выгрузки

---

## 9. Следующие шаги

1. Дополнить `api_contracts.md` точными названиями полей
2. Обновить `frontend_plan_dev2.md` с точными UI компонентами
3. Добавить в `backend_plan_dev1.md` колонки таблиц из реальной CRM
4. Создать `ui_mockups.md` с описанием ключевых экранов
5. Добавить примеры SQL-запросов для конверсии

---

**Статус**: Анализ завершен  
**Дата**: 25 февраля 2026  
**Источники**: 5 скриншотов + живой сайт https://crm.it-datamaster.ru/
